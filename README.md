üèÉ‚Äç‚ôÇÔ∏è Russia Running Telegram Bot - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è


–ú–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π Telegram –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–±–µ–≥–∞–º–∏ –∏ –∫–≤–µ—Å—Ç–∞–º–∏ Russia Running —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π AI, —Å–∏—Å—Ç–µ–º–æ–π —Ä–∞—Å—Å—ã–ª–∫–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö.


üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

ü§ñ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞
- –ú–Ω–æ–≥–æ—ç—Ç–∞–ø–Ω—ã–µ –∫–≤–µ—Å—Ç—ã —Å –∑–∞–≥–∞–¥–∫–∞–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Ç–≤–µ—Ç–æ–≤
- AI-–∞–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–µ–∫ —á–µ—Ä–µ–∑ Yandex Vision + YandexGPT
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ stage_5 - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
- Graceful shutdown —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º —Ä–∞–±–æ—Ç—ã
üìß –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
- SMTP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö —Ä–∞—Å—Å—ã–ª–æ–∫
- –ß–∞—Å—Ç—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç)
- –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π
- Telegram —Å—Å—ã–ª–∫–∏ —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π —Ç–∞–π–º–∞—É—Ç–æ–≤
üìä –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –≠–∫—Å–ø–æ—Ä—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å RussiaRunning —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 2FA
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏–∑ Excel
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –∑–∞–±–µ–≥–∞ (1-5)


üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

russia_running/
‚îú‚îÄ‚îÄ logs/
‚îÇ   ‚îî‚îÄ‚îÄ bot.log                                  # –õ–æ–≥–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ russia_running_api.py                        # –û—Å–Ω–æ–≤–Ω–æ–π API –∫–ª–∏–µ–Ω—Ç RussiaRunning
‚îú‚îÄ‚îÄ check_session.py                             # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ RussiaRunning
‚îú‚îÄ‚îÄ info.txt                                     # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ
‚îú‚îÄ‚îÄ rr_session.json                              # –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è RussiaRunning
‚îú‚îÄ‚îÄ .env                                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∫–æ—Ä–Ω–µ–≤–æ–π)
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ database.py                              # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ export_excel_with_otp.py                 # –≠–∫—Å–ø–æ—Ä—Ç Excel —Å OTP
‚îÇ   ‚îú‚îÄ‚îÄ mail_integration.py                      # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–æ—á—Ç–æ–≤—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
‚îÇ   ‚îú‚îÄ‚îÄ participants_export_current.xls          # –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ runners.db                               # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ   ‚îú‚îÄ‚îÄ mail_service_20251122.log                # –õ–æ–≥–∏ –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îú‚îÄ‚îÄ deepseek_client/                         # AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ .env                                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ extract_with_yandexgpt_agent_fixed.py # –û—Å–Ω–æ–≤–Ω–æ–π AI –º–æ–¥—É–ª—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ extract_with_yandexgpt_agent_fixed.txt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ running_analysis_agent_result.json   # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ AI
‚îÇ   ‚îú‚îÄ‚îÄ handlers/                                # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Telegram –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py                             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ update_data.py                       # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common_intro.py                      # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —ç—Ç–∞–ø–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ link_generation.py                   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login_pp.py                          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è RussiaRunning
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mail_management.py                   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–æ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ participants_export.py               # –≠–∫—Å–ø–æ—Ä—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plan_link_generation.py              # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å—Å—ã–ª–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ quest.py                             # –ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–≤–µ—Å—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_1.py                           # –≠—Ç–∞–ø 1 –∫–≤–µ—Å—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_2.py                           # –≠—Ç–∞–ø 2 –∫–≤–µ—Å—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_3.py                           # –≠—Ç–∞–ø 3 –∫–≤–µ—Å—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_4.py                           # –≠—Ç–∞–ø 4 –∫–≤–µ—Å—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_5.py                           # –ü–∞–∫–µ—Ç –Ω–∞ 4 —ç—Ç–∞–ø–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stage_content_management.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º —ç—Ç–∞–ø–æ–≤ (–æ–ø—É—â–µ–Ω–æ, —Å—Ä–æ–∫–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ stage_management.py                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç—Ç–∞–ø–∞–º–∏ (–æ–ø—É—â–µ–Ω–æ, —Å—Ä–æ–∫–∏)
‚îÇ   ‚îú‚îÄ‚îÄ mail_service/                            # –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ check_system.py                      # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è SMTP
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_main.py                        # –û—Å–Ω–æ–≤–Ω–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_sender.py                      # –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ email_templates.py                   # –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º 
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mail_service_20251119.log            # –õ–æ–≥–∏ –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py                         # –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞—Å—Å—ã–ª–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.py                             # –£—Ç–∏–ª–∏—Ç—ã –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ utils/                                   # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database_processor.py                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py                            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rr_export_bot_friendly.py            # –≠–∫—Å–ø–æ—Ä—Ç–µ—Ä –¥–ª—è –±–æ—Ç–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ shutdown.py                          # Graceful shutdown
‚îÇ   ‚îî‚îÄ‚îÄ media/                                   # –ú–µ–¥–∏–∞ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ .env                                         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¥—É–±–ª–∏—Ä—É—é—â–∏–π)
‚îú‚îÄ‚îÄ .gitignore                                   # Git ignore –ø—Ä–∞–≤–∏–ª–∞
‚îú‚îÄ‚îÄ commands.txt                                 # –°–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ README.md                                    # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ requirements.txt                             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞


üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
 
1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

pip install -r requirements.txt

–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

TXT
aiogram==3.17.0
python-dotenv==1.0.1
requests==2.31.0
urllib3==1.26.18
beautifulsoup4==4.12.2
pillow>=8.0.0
pandas>=2.0.0

2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

ENV
# Telegram Bot
BOT_TOKEN=your_telegram_bot_token
TELEGRAM_BOT_USERNAME=your_bot_username

# Database
DATABASE_PATH=runners.db

# RussiaRunning
RR_USERNAME=your_russia_running_email
RR_PASSWORD=your_password

# SMTP Settings
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_EMAIL=your_email@gmail.com
SMTP_PASSWORD=your_app_password

# Yandex AI Services
YANDEX_VISION_API_KEY=your_vision_api_key
YANDEX_GPT_API_KEY=your_gpt_api_key
YANDEX_AGENT_ID=your_agent_api_key

3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

manual_upload - –¥–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
main - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞
stages - —ç—Ç–∞–ø—ã –∫–≤–µ—Å—Ç–∞
link_generation - —Å—Å—ã–ª–∫–∏ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
verification - –¥–∞–Ω–Ω—ã–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
user_data - –¥–∞–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

4. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python src/main.py

üéÆ –≠—Ç–∞–ø—ã –∫–≤–µ—Å—Ç–∞
Stage 1: "–ü—Ä–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –≤ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–º —à—Ç–∞–±–µ"
–ó–∞–≥–∞–¥–∫–∞: "–ú–∞—è–∫"
–ü—Ä–æ–º–æ–∫–æ–¥: RUNNER2025

–ü–µ—Ä–µ—Ö–æ–¥: Stage 2
Stage 2: "–ü—Ä–æ–≤–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–∏"
–ó–∞–≥–∞–¥–∫–∞: "–ö–æ–º–ø–∞—Å"
–ü—Ä–æ–º–æ–∫–æ–¥: GUARDIAN2025

–ü–µ—Ä–µ—Ö–æ–¥: Stage 3
Stage 3: "–û–±—Ä–∞—Ç–Ω—ã–π –æ—Ç—Å—á–µ—Ç"
–ó–∞–≥–∞–¥–∫–∞: "–ú–∞–≥–Ω–∏—Ç–æ—Ñ–æ–Ω"
–ü—Ä–æ–º–æ–∫–æ–¥: SAVIOR2025
AI –∞–Ω–∞–ª–∏–∑: —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–µ–∫

–ü–µ—Ä–µ—Ö–æ–¥: Stage 4
Stage 4: "–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–π—Å"
–§–∏–Ω–∞–ª—å–Ω—ã–π —ç—Ç–∞–ø —Å —Ä–µ–ª–∏–∫–≤–∏–µ–π "–õ–æ—à–∞–¥—å"
–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∫–≤–µ—Å—Ç–∞

Stage 5: –ü–∞–∫–µ—Ç –Ω–∞ 4 —ç—Ç–∞–ø–∞
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ current_stage

–ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç—Ç–∞–ø–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

üîó –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫
–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/generate_all_links     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å—Å—ã–ª–æ–∫
/get_links             # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏
/get_link_stats        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Å—ã–ª–æ–∫
/start_link_scheduler  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

–§–æ—Ä–º–∞—Ç —Å—Å—ã–ª–æ–∫:
https://t.me/{bot_username}?start={universal_link}

üìß –°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—ã–ª–∫–∏
–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
/mail_status           # –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã —Ä–∞—Å—Å—ã–ª–∫–∏
/send_mail             # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
–®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º:
universal_link - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–∏—Å—å–º–æ —Å Telegram —Å—Å—ã–ª–∫–æ–π
completion - –ü–∏—Å—å–º–æ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–≤–µ—Å—Ç–∞

–ó–∞–ø—É—Å–∫ –ø–æ—á—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
python src/mail_service/email_main.py --auto

üîê –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å RussiaRunning
–ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞:
/login                 # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ RussiaRunning
/rr_status             # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Å—Å–∏–∏  
/rr_logout             # –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
/export_participants   # –≠–∫—Å–ø–æ—Ä—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ API:
python russia_running_api.py

ü§ñ AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
–ê–Ω–∞–ª–∏–∑ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–µ–∫:
from deepseek_client.extract_with_yandexgpt_agent_fixed import extract_data_for_user

running_data = extract_data_for_user(image_path)
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: {'date': '08.11.2025', 'distance': '5.25 –∫–º'}


üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
manual_upload - –¥–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

SQL
participant_id, last_name, first_name, middle_name, email, phone, stage_id
main - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞

SQL
user_id, participant_id, telegram_id, telegram_username, role, quest_started, current_stage
link_generation - —Å—Å—ã–ª–∫–∏

SQL
participant_id, universal_link, status, creation_date, mailing_date, link_click_date
üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏:
BASH
/export_participants    # –≠–∫—Å–ø–æ—Ä—Ç –∏–∑ RussiaRunning
/generate_all_links     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫
/get_links             # –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Å—ã–ª–æ–∫
/get_link_stats        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–∫–æ–π:
/mail_status           # –°—Ç–∞—Ç—É—Å —Ä–∞—Å—Å—ã–ª–∫–∏
/send_mail             # –ù–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞

–°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
/session_status        # –°—Ç–∞—Ç—É—Å RussiaRunning —Å–µ—Å—Å–∏–∏
/login                 # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è RussiaRunning

üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
Graceful Shutdown
from utils.shutdown import ShutdownManager

shutdown_manager = ShutdownManager(bot, dp, logger)
shutdown_manager.setup_signal_handlers()

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
–§–∞–π–ª–æ–≤—ã–µ –ª–æ–≥–∏ –≤ –ø–∞–ø–∫–µ logs/
–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏

üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º
–°—Ç–∞—Ç—É—Å—ã –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞
–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞—Å—Å—ã–ª–æ–∫
–î–∞–Ω–Ω—ã–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–±–µ–∂–µ–∫
–õ–æ–≥–∏:
–ë–æ—Ç: logs/bot.log
–†–∞—Å—Å—ã–ª–∫–∞: mail_service_YYYYMMDD.log
RussiaRunning: –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥

üöÄ –î–µ–ø–ª–æ–π
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É:
Python 3.8+
–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
1GB+ RAM
10GB+ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:
BASH

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º .env

# –ó–∞–ø—É—Å–∫ –≤ screen/tmux
screen -S runner-bot
python src/main.py

üéØ –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤:
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–µ—Ä–µ–∑ RussiaRunning
–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥–æ–π /export_participants
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Å—ã–ª–æ–∫ –∫–æ–º–∞–Ω–¥–æ–π /generate_all_links (–∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–∏ 5 –º–∏–Ω—É—Ç)
–ó–∞–ø—É—Å–∫ —Ä–∞—Å—Å—ã–ª–∫–∏ –∫–æ–º–∞–Ω–¥–æ–π /send_mail (–∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–∏ 5 –º–∏–Ω—É—Ç)
–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

–î–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –ø–æ email
–ù–∞—á–∞–ª–æ –∫–≤–µ—Å—Ç–∞ –≤ Telegram –±–æ—Ç–µ
–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–æ–±–µ–∂–µ–∫
–†–µ—à–µ–Ω–∏–µ –∑–∞–≥–∞–¥–æ–∫ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
–ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∑–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ